★データの呼び方（３つ）
クロスセクションデータ…ある一時点において横断的に集められたデータ（例えばAクラスの二学期中間テストの結果みたいな。。。）
時系列データ…時間を通じて変化するデータ
パネルデータ…クロスセクションデータと時系列データのハイブリット


★対応のない、対応のある
2つの集団（2群）の比較で、異なる集団について測定したデータは対応のないデータ、同じ集団について測定したデータは対応のあるデータという。
全員に介入して、変化を見たい場合→対応のある母平均の差の検定
一部と比較して変化を見たい場合→対応のない母平均の差の検定

★因果推論で回帰分析をする場合
回帰分析を使用してやる場合
→バイアスを取り除くには共変量（コントロール変数）を回帰分析に入れる。
→共変量が0の時、試作の効果がどうなってんのかを確認することができる。
→E[Y|X]だったのがE[Y|X,C]のように条件つけてみることができる。
→交差項（女性かつ高卒）を入れると相乗効果を確かめることができる。
→多重共線性があるか確認する方法→VIF 10 超えていたらマルチコが発生していると一般的には考えられている。
（マルチコが起きていると、係数が過大に評価されてしまう。）
→仮定を満たしているのかどうかを確認する方法
→https://note.com/osipp_econ/n/nb817891c576f
→https://note.com/osipp_econ/n/n26a1dc5c922d
<重要！>毎回ホワイト検定などで不均一分散かどうかを確認する必要がある。
基本的に仮定を満たしていないことが多いため。

残差分析を行う時はこちら
https://www.ritolab.com/posts/245#%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90
memo
誤差項のばらつきが均一出ない時は robust standard error(ロバスト標準誤差を使用するとよい。)

★不偏性のための4つの仮定
1.母集団分布において、確率変数の間には線形の関係がある。(y = b0 + b1・x + U)
2.母集団から標本サイズ n の無作為抽出になっている。
3.E[U|X]=0 説明変数と誤差項は平均独立
4.説明変数 X に変動がある。(全ての観測が同じではない)



★残差と誤差は違うので注意
<重要>
誤差項の推定値として残差を使用する。
→この残差を使用して誤差項の分散が均一なのかどうかとか、そういうのをみていく！
残差:回帰分析で求めた式で算出した予測値と真の値との差
誤差:真の回帰式と真の値との差
→https://bellcurve.jp/statistics/course/9704.html






★統計的な手法（ランダム化比較試験ができないときの対処）
差の差分析
操作変数法
回帰不連続
マッチング方法

・差と差の分析
介入前後で変化があったかどうかをみる。
介入群と対対照群の介入前と介入後の差を見て効果を推定する。　
前提条件2つある
・介入群と対照群において広告を出す前の売上のトレンドが平行（広告を出す前の売上の傾きが介入群と対照群とで一緒っていう感じ！）
・介入後に売上に影響を与えるような別の変化が起きていない

・操作変数法
内生性(誤差高と説明変数に相関がある。)がある場合でも一致推定のできる方法。
前提条件2つ
・操作変数は原因（X：説明変数）に影響するが、結果（Y：被説明変数）には直接影響しない。
・操作変数と結果の両方に影響を与えるような第4の変数が存在しない
手順：
① 説明変数を操作変数で回帰する
② ①で予測した値を使用して被説明変数を回帰する。

・回帰不連続デザイン
前提条件
連続変数のカットオフ値の周辺で結果に影響を与えるような他のイベントが起きていない

・傾向スコアマッチング
前提条件2つ
・すべての共変量がデータとして存在している。
・共変量がすべて傾向スコアに使用されている